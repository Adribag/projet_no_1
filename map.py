map = [
    # [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,49],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,49]
    ]

import os, sys
# import tryHud as hud


borderIco = "🔳"
borderMap ="🟫"
mapIco = "🗺️"
treeIco = "🏝️"
waveIco = "🌊"
mountIco = "🟫"
sandIco = "🟨"
waterIco = "🟦"
florIco = "🟩"
questIco = "🟪"
playIco = "🟧"
survieWaterIco = "⬜"
surcieFoodIco = "🟥"
palmTreeIco = "🌴"
playerIco = "👨"
barrehori = "─"
titre = "L'île au Python"
eat = "Nourriture"
energy = "Energie"
water = "Soif"
iconSurvie = "■"
stamina = "■"
drinking = "■"


Position_Suffix = "H"
Prefix = "\x1b["
Style_Suffix = "m"
Reset = "0"
red = "1"
green = "2"
blue = "4"
FG_Prefix = "3"

eatingList = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]
staminaList = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]
drinkingList = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]

def printBar(y,x,list,icon,color):
    for i in range(len(list)):
        # print(icon)
        Position = f"{Prefix}{y};{x}{Position_Suffix}"
        x += 1
        print(f"{Position}{Prefix}{FG_Prefix}{color}{Style_Suffix}{icon}{Prefix}{Reset}{Style_Suffix}")

def drawMap(posY,posX,symb):
    map[posY][posX] = symb

def printBorderMap():
    for line in range (len(map)):
        if(line == 0 or line == 29):
            for i in range(len(map[line])):
                map[line][i] = borderMap
        else:
            map[line][0] = borderMap
            map[line][49] = borderMap

def printMount():  
    for x in range(1,49):
        drawMap(1,x,mountIco)
    for x in range(1,19):
        drawMap(2,x,mountIco)
    for x in range(28,49):
        drawMap(2,x,mountIco)
    for y in range(3,29):
        drawMap(y,1,mountIco)
    for y in range(3,27):
        drawMap(y,48,mountIco)
    
    

    drawMap(3,2,mountIco)
    drawMap(4,2,mountIco)
    drawMap(3,3,mountIco)

    drawMap(3,47,mountIco)
    drawMap(4,47,mountIco)
    drawMap(3,46,mountIco)
    
def printSea():
    for i in range(1,49):
        drawMap(28,i,waterIco)
        drawMap(27,i,waterIco)

def printRiver():
    for x in range(21,26):
        for y in range(20,27):
            drawMap(y,x,waterIco)
    for x in range(20,24):
        for y in range(14,20):
            drawMap(y,x,waterIco)
    for x in range(19,22):
        for y in range(8,14):
            drawMap(y,x,waterIco)
    for x in range(18,20):
        for y in range(5,8):
            drawMap(y,x,waterIco)
    for x in range(18,19):
        for y in range(1,5):
            drawMap(y,x,waterIco)

def printSand():
    for i in range(1,49):
        drawMap(26,i,sandIco)
        drawMap(25,i,sandIco)
    for i in range(30,49):
        drawMap(24,i,sandIco)
    # drawMap(25,45,sandIco)

def printQuests():
    # Première quete
    drawMap(25,27,questIco)
    # Deuxieme quete
    drawMap(10,48,questIco)
    # Troisieme quete
    drawMap(20,10,questIco)
    # Porte finale
    drawMap(1,20,questIco)

def fondMap():
    for i in range(len(map)):
        for j in range(len(map[i])):
            map[i][j] = florIco


# Position = f"{Prefix}{Y};{X}{Position_Suffix}"
#      print(f"{Position}{icon} ", end="")

def affichageMap(map,poY = 0,poX = 0):
    
    for poY in range(len(map)):
        for poX in range(len(map[poY])):
            if(poX == 0):
                print()
            Position = f"{Prefix}{poY};{poX}{Position_Suffix}"
            print(f"{Position}{map[poY][poX]}")    

            # print(map[poY][poX], end ="")
            
                # print(f" valeur de remvove = {remove}")

def printPos(Y,X,icon):
    Position = f"{Prefix}{Y};{X}{Position_Suffix}"
    print(f"{Position}{icon} ", end="")     

def printHud():
    printPos(2,73,titre)
    printPos(4,55,eat)
    printPos(8,55,energy)
    printPos(12,55,water)

    printBar(5,56,eatingList,iconSurvie,red)
    printBar(9,56,staminaList,iconSurvie,green)
    printBar(13,56,drinkingList,iconSurvie,blue)

    for i in range(51,110):
        printPos(3,i,barrehori)
    for i in range(51,110):
        printPos(16,i,barrehori)


    for i in range (1,30):             
        printPos(i,50,borderIco)
    for i in range(50,110):
        printPos(1,i,borderIco)
    for i in range(50,110):
        printPos(29,i,borderIco)
    for i in range (1,30):             
        printPos(i,110,borderIco)
    

quest = "start"
def moveplayer():

    startPosY = 25
    startPosX = 45
    currentPos = sandIco
    ClearConsole()
    
    drawMap(startPosY,startPosX,playIco)
    drawMap(26,46,surcieFoodIco)
    drawMap(26,40,survieWaterIco)
    affichageMap(map)
    printHud()

    # affichePlayer(startPosY,startPosX)
    
    while quest != "end":

        moving = input("Vers quelle direction aller : ").upper()
        print()
        print(moving) 

        if moving == "Z":  
            oldIco = map[startPosY-1][startPosX]
            startPosY -= 1 

            ClearConsole()
            # hud.printHudTop()
            drawMap(startPosY +1,startPosX,currentPos)  
            drawMap(startPosY,startPosX,playIco)
            affichageMap(map) 
            printHud()
            # hud.printHudSep()
            # hud.printHudBot()

            currentPos = oldIco
            
        if moving == "S":
            oldIco = map[startPosY+1][startPosX]
            startPosY += 1 

            ClearConsole()
            drawMap(startPosY -1,startPosX,currentPos)  
            drawMap(startPosY,startPosX,playIco)
            affichageMap(map) 
            printHud()
            currentPos = oldIco

        if moving == "Q":
            oldIco = map[startPosY][startPosX-1]
            startPosX -= 1 

            ClearConsole()
            drawMap(startPosY,startPosX +1,currentPos)  
            drawMap(startPosY,startPosX,playIco)
            affichageMap(map) 
            printHud()
            currentPos = oldIco

        if moving == "D":

            oldIco = map[startPosY][startPosX+1]
            startPosX += 1 

            ClearConsole()
            drawMap(startPosY,startPosX -1,currentPos)  
            drawMap(startPosY,startPosX,playIco)
            affichageMap(map) 
            printHud()  
            currentPos = oldIco
        
        if(startPosY == 25 and startPosX == 27):
            print()
            print("Tu es sur la première quete")
            question = input("Veux tu lancer la quete O -> Oui | N -> Non : ").upper()
            if(question == "O"):
                print("Tu lance la quete")
                import nbrmystere as nbrM
                nbrM.nbrMyst()
            else:
                print("Passe ton chemin")
        
        print()
        print(f"X = {startPosX} | Y = {startPosY}")

def ClearConsole():
    """
        Clear the console depending on OS
    """

    if "win" in sys.platform.lower():
        # for windows
        os.system("cls")
    elif "linux" in sys.platform.lower():
        # for linux
        os.system("clear")



# affichePlayer(posY = 25,posX = 45)

# affichageMap(map)
fondMap()
printSea()
printSand()
printMount()
printRiver()
printQuests()
printBorderMap()

moveplayer()
